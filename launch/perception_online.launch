<?xml version="1.0" encoding="UTF-8"?>
<launch>

    <!-- Play rosbag record -->
    <!-- <include file="$(find delta_perception)/launch/play_rosbag.launch">
        <arg name="filename" value="$(find delta_perception)/bags/Pittsburgh-02.bag" />
    </include> -->

    <!-- <include file="$(find carla_ros_bridge)/launch/client_with_radar.launch">
    </include> -->

    <!-- Run ego-vehicle prediction -->
    <!-- <include file="$(find delta_prediction)/launch/ego_vehicle_prediction.launch">
    </include> -->

    <!-- Run the perception pipeline -->
    <node
        pkg="delta_perception"
        type="main.py"
        name="main"
        output="screen">
    </node>

    <!-- Run lane detection -->
    <node
        pkg="delta_perception"
        type="lane_detection.py"
        name="lane_detection"
        output="screen">
    </node>

    <!-- Run semantic segmentation -->
    <!-- <node
        pkg="delta_perception"
        type="segmentation.py"
        name="segmentation"
        output="screen">
    </node> -->

    <!-- Run inverse_perspective mapping -->
    <node
        pkg="delta_perception"
        type="ipm_node.py"
        name="ipm_node"
        output="screen">
    </node>

    <!-- Display object detection and tracking image -->
    <node
        name="image_view_object_detection_tracking"
        pkg="image_view"
        type="image_view"
        respawn="false"
        output="screen">
        <remap from="image" to="/delta/perception/object_detection_tracking/image" />
    </node>

    <!-- Display lane detection image -->
    <node
        name="image_view_lane_detection"
        pkg="image_view"
        type="image_view"
        respawn="false"
        output="screen">
        <remap from="image" to="/delta/perception/ipm/image" />
    </node>

    <node
        type="rviz" name="rviz" pkg="rviz" args="-d $(find delta_perception)/perception.rviz">
    </node>

</launch>
